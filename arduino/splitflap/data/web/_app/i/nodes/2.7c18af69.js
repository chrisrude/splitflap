import { C as $, t as E, m as G, S as H, n as J, i as K, d as S, E as Se, D as U, k as V, s as W, y as Y, l as Z, p as ae, j as b, u as ce, w as de, z as fe, f as h, o as ie, g as m, b as oe, c as q, r as re, v as ue, h as v, a as w, A as x, x as y, B as ye } from "../c/index.86993a36.js";
import { b as N, n as Q, f as X, r as me, o as ve, s as z } from "../c/s.bc760b9c.js";
function O(a) { return (a == null ? void 0 : a.length) !== void 0 ? a : Array.from(a) } const pe = [" ", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", ".", ",", "'"], R = 16, _ = 8, ee = pe[0]; function be(a) { let t, s; return { c() { t = m("div"), s = G(a[0]), this.h() }, l(o) { t = v(o, "DIV", { class: !0 }); var n = b(t); s = J(n, a[0]), n.forEach(h), this.h() }, h() { V(t, "class", "flapActualValue svelte-1c1m9yt"), Y(t, "selected", a[2]) }, m(o, n) { w(o, t, n), y(t, s) }, p(o, n) { n & 1 && ie(s, o[0]), n & 4 && Y(t, "selected", o[2]) }, d(o) { o && h(t) } } } function ke(a) { let t, s; return { c() { t = m("div"), s = G(a[1]), this.h() }, l(o) { t = v(o, "DIV", { class: !0 }); var n = b(t); s = J(n, a[1]), n.forEach(h), this.h() }, h() { V(t, "class", "flapPendingValue svelte-1c1m9yt") }, m(o, n) { w(o, t, n), y(t, s) }, p(o, n) { n & 2 && ie(s, o[1]) }, d(o) { o && h(t) } } } function we(a) { let t; function s(e, c) { return e[1] !== void 0 ? ke : be } let o = s(a), n = o(a); return { c() { t = m("div"), n.c(), this.h() }, l(e) { t = v(e, "DIV", { class: !0 }); var c = b(t); n.l(c), c.forEach(h), this.h() }, h() { V(t, "class", "flap svelte-1c1m9yt") }, m(e, c) { w(e, t, c), n.m(t, null) }, p(e, [c]) { o === (o = s(e)) && n ? n.p(e, c) : (n.d(1), n = o(e), n && (n.c(), n.m(t, null))) }, i: Q, o: Q, d(e) { e && h(t), n.d() } } } function De(a, t, s) { let { value: o } = t, { pendingValue: n } = t, { selected: e = !1 } = t; return a.$$set = c => { "value" in c && s(0, o = c.value), "pendingValue" in c && s(1, n = c.pendingValue), "selected" in c && s(2, e = c.selected) }, [o, n, e] } class Ee extends H { constructor(t) { super(), K(this, t, De, we, z, { value: 0, pendingValue: 1, selected: 2 }) } } function te(a, t, s) { const o = a.slice(); return o[5] = t[s], o[7] = s, o } function ne(a, t, s) { const o = a.slice(); return o[8] = t[s], o[10] = s, o } function le(a) { var o; let t, s; return t = new Ee({ props: { value: a[8].current, pendingValue: a[8].pending, selected: a[7] * _ + a[10] === ((o = a[0]) == null ? void 0 : o.length) } }), { c() { re(t.$$.fragment) }, l(n) { ce(t.$$.fragment, n) }, m(n, e) { ue(t, n, e), s = !0 }, p(n, e) { var l; const c = {}; e & 2 && (c.value = n[8].current), e & 2 && (c.pendingValue = n[8].pending), e & 1 && (c.selected = n[7] * _ + n[10] === ((l = n[0]) == null ? void 0 : l.length)), t.$set(c) }, i(n) { s || (S(t.$$.fragment, n), s = !0) }, o(n) { E(t.$$.fragment, n), s = !1 }, d(n) { de(t, n) } } } function se(a) { let t, s, o, n = O(a[1].slice(a[7] * _, (a[7] + 1) * _)), e = []; for (let l = 0; l < n.length; l += 1)e[l] = le(ne(a, n, l)); const c = l => E(e[l], 1, 1, () => { e[l] = null }); return { c() { t = m("div"); for (let l = 0; l < e.length; l += 1)e[l].c(); s = W(), this.h() }, l(l) { t = v(l, "DIV", { class: !0 }); var r = b(t); for (let i = 0; i < e.length; i += 1)e[i].l(r); s = q(r), r.forEach(h), this.h() }, h() { V(t, "class", "flapRow svelte-ydaj79") }, m(l, r) { w(l, t, r); for (let i = 0; i < e.length; i += 1)e[i] && e[i].m(t, null); y(t, s), o = !0 }, p(l, r) { if (r & 3) { n = O(l[1].slice(l[7] * _, (l[7] + 1) * _)); let i; for (i = 0; i < n.length; i += 1) { const u = ne(l, n, i); e[i] ? (e[i].p(u, r), S(e[i], 1)) : (e[i] = le(u), e[i].c(), S(e[i], 1), e[i].m(t, s)) } for (ae(), i = n.length; i < e.length; i += 1)c(i); oe() } }, i(l) { if (!o) { for (let r = 0; r < n.length; r += 1)S(e[r]); o = !0 } }, o(l) { e = e.filter(Boolean); for (let r = 0; r < e.length; r += 1)E(e[r]); o = !1 }, d(l) { l && h(t), fe(e, l) } } } function Ve(a) { let t, s, o, n = O({ length: a[2] }), e = []; for (let l = 0; l < n.length; l += 1)e[l] = se(te(a, n, l)); const c = l => E(e[l], 1, 1, () => { e[l] = null }); return { c() { t = m("div"), s = m("div"); for (let l = 0; l < e.length; l += 1)e[l].c(); this.h() }, l(l) { t = v(l, "DIV", { class: !0 }); var r = b(t); s = v(r, "DIV", { style: !0 }); var i = b(s); for (let u = 0; u < e.length; u += 1)e[u].l(i); i.forEach(h), r.forEach(h), this.h() }, h() { Z(s, "display", "contents"), Z(s, "--modules-per-row", _), V(t, "class", "flapDisplay svelte-ydaj79") }, m(l, r) { w(l, t, r), y(t, s); for (let i = 0; i < e.length; i += 1)e[i] && e[i].m(s, null); o = !0 }, p(l, [r]) { if (r & 3) { n = O({ length: l[2] }); let i; for (i = 0; i < n.length; i += 1) { const u = te(l, n, i); e[i] ? (e[i].p(u, r), S(e[i], 1)) : (e[i] = se(u), e[i].c(), S(e[i], 1), e[i].m(s, null)) } for (ae(), i = n.length; i < e.length; i += 1)c(i); oe() } }, i(l) { if (!o) { for (let r = 0; r < n.length; r += 1)S(e[r]); o = !0 } }, o(l) { e = e.filter(Boolean); for (let r = 0; r < e.length; r += 1)E(e[r]); o = !1 }, d(l) { l && h(t), fe(e, l) } } } function Pe(a, t, s) { const o = R / _; let { flapString: n } = t, { flapStringPending: e } = t, c = Array(R).fill({ current: ee }); const l = () => { s(1, c = c.map((r, i) => { var u, g; return { current: (u = n[i]) !== null && u !== void 0 ? u : ee, pending: (g = e == null ? void 0 : e[i]) !== null && g !== void 0 ? g : void 0 } })) }; return a.$$set = r => { "flapString" in r && s(3, n = r.flapString), "flapStringPending" in r && s(0, e = r.flapStringPending) }, a.$$.update = () => { a.$$.dirty & 9 && (n !== void 0 || e !== void 0) && l() }, [e, c, o, n] } class Fe extends H { constructor(t) { super(), K(this, t, Pe, Ve, z, { flapString: 3, flapStringPending: 0 }) } } function Ae(a) {
    let t, s, o, n, e, c, l, r, i, u, g = "Set", D, P, A; function T(f) { a[7](f) } function M(f) { a[8](f) } let L = {}; return a[0] !== void 0 && (L.flapString = a[0]), a[1] !== void 0 && (L.flapStringPending = a[1]), t = new Fe({ props: L }), N.push(() => x(t, "flapString", T)), N.push(() => x(t, "flapStringPending", M)), {
        c() {
            re(t.$$.fragment), n = W(), e = m("form"), c = m("label"), l = G(`Display:
        `), r = m("input"), i = W(), u = m("button"), u.textContent = g, this.h()
        }, l(f) {
            ce(t.$$.fragment, f), n = q(f), e = v(f, "FORM", { class: !0 }); var d = b(e); c = v(d, "LABEL", {}); var p = b(c); l = J(p, `Display:
        `), r = v(p, "INPUT", {}), p.forEach(h), i = q(d), u = v(d, "BUTTON", { "data-svelte-h": !0 }), ye(u) !== "svelte-xfixc6" && (u.textContent = g), d.forEach(h), this.h()
        }, h() { V(e, "class", "inputForm svelte-1ka4xs7") }, m(f, d) { ue(t, f, d), w(f, n, d), w(f, e, d), y(e, c), y(c, l), y(c, r), $(r, a[1]), a[10](r), y(e, i), y(e, u), D = !0, P || (A = [U(window, "click", a[6]), U(r, "input", a[9]), U(r, "keydown", a[11]), U(e, "submit", Se(a[3]))], P = !0) }, p(f, [d]) { const p = {}; !s && d & 1 && (s = !0, p.flapString = f[0], X(() => s = !1)), !o && d & 2 && (o = !0, p.flapStringPending = f[1], X(() => o = !1)), t.$set(p), d & 2 && r.value !== f[1] && $(r, f[1]) }, i(f) { D || (S(t.$$.fragment, f), D = !0) }, o(f) { E(t.$$.fragment, f), D = !1 }, d(f) { f && (h(n), h(e)), de(t, f), a[10](null), P = !1, me(A) }
    }
} function Le(a, t, s) { var o = this && this.__awaiter || function (f, d, p, C) { function he(F) { return F instanceof p ? F : new p(function (I) { I(F) }) } return new (p || (p = Promise))(function (F, I) { function ge(k) { try { B(C.next(k)) } catch (j) { I(j) } } function _e(k) { try { B(C.throw(k)) } catch (j) { I(j) } } function B(k) { k.done ? F(k.value) : he(k.value).then(ge, _e) } B((C = C.apply(f, d || [])).next()) }) }; let n = "Hello World!", e = "", c = !1; const l = () => o(void 0, void 0, void 0, function* () { const f = yield fetch("/text"); f.ok ? (s(0, n = yield f.text()), c = !1) : (c || (console.error("Failed to get flap string"), console.error(f)), c = !0) }), r = () => o(void 0, void 0, void 0, function* () { const f = new FormData; f.append("message", e); const d = fetch("/set", { method: "POST", body: f }), p = yield d; return p.ok ? (s(0, n = e), s(1, e = "")) : console.error(p), d }), i = () => { const f = e.length / _, d = R / _; if (f < d - 1) { const p = " ".repeat(_ - e.length % _); s(1, e += p) } }, u = f => { s(1, e = f.repeat(R)) }; let g; ve(() => { g.focus(), setInterval(l, 1e3) }); const D = () => { g.focus() }; function P(f) { n = f, s(0, n) } function A(f) { e = f, s(1, e) } function T() { e = this.value, s(1, e) } function M(f) { N[f ? "unshift" : "push"](() => { g = f, s(2, g) }) } return [n, e, g, r, i, u, D, P, A, T, M, f => { f.key === "Enter" && f.shiftKey === !0 || f.key === "Tab" ? (i(), f.preventDefault()) : f.ctrlKey && f.key.length === 1 ? u(f.key) : f.key.length === 1 && !pe.includes(f.key.toLowerCase()) && f.preventDefault() }] } class Ue extends H { constructor(t) { super(), K(this, t, Le, Ae, z, {}) } } export { Ue as component };

